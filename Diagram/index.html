<html>
<head>
	<title>mxGraph Workflow Designer</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css" media="screen">
		div.base {
			position: absolute;
			overflow: hidden;
			font-family: Arial;
			font-size: 8pt;
		}
		div.base#graph {
			border-style: solid;
			border-color: #F2F2F2;
			border-width: 1px;
			background: url('images/grid.gif');
		}
	</style>

	<script type="text/javascript">
		mxBasePath = '../../src';
		//window.onbeforeunload = function () { return mxResources.get('changesLost'); };
	</script>
	<script type="text/javascript" src="../../src/js/mxClient.js"></script>
	<script type="text/javascript" src="js/mxApplication.js"></script>
    <script type="text/javascript">
        var editor;
        function onInit(e)
        {
            editor = e;

            load('<mxGraphModel><root><Workflow label="MyWorkflow" description="" href="" id="0"><mxCell/></Workflow><Layer label="Default Layer" id="1"><mxCell parent="0"/></Layer><Task label="Task" description="" href="" id="2"><mxCell vertex="1" parent="1"><mxGeometry x="250" y="110" width="72" height="32" as="geometry"/></mxCell></Task><Shape label="" description="" href="" id="3"><mxCell style="ellipse" vertex="1" parent="1"><mxGeometry x="350" y="190" width="32" height="32" as="geometry"/></mxCell></Shape><Subprocess label="Subprocess" description="" href="" id="4"><mxCell style="rounded" vertex="1" parent="1"><mxGeometry x="190" y="210" width="72" height="32" as="geometry"/></mxCell></Subprocess></root></mxGraphModel>');
        }

        function load(xml) {
            var doc = mxUtils.parseXml(xml);
            var dec = new mxCodec(doc);
            dec.decode(doc.documentElement, editor.graph.getModel());
        }

        function save() {
            var enc = new mxCodec(mxUtils.createXmlDocument());
            var node = enc.encode(editor.graph.getModel());
            var xml = mxUtils.getXml(node);
            console.log(xml);

        }

   
    </script>
</head>
<body onload="mxApplication('config/layouteditor.xml');">
    <div style="margin:50px">
        <div id="graph" class="base">
            <!-- Graph Here -->
        </div>
       
    </div>

    <button id="save" onclick="save()">Save</button>
</body>
</html>
